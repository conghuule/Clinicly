import { faChartSimple } from '@fortawesome/free-solid-svg-icons';
import { Card, Col, Row, Statistic } from 'antd';
import React from 'react';
import HeaderBar from '../../components/HeaderBar';
import dashboardApi from '../../services/dashboardApi';
import { useState, useEffect } from 'react';
import { DatePicker, Space } from 'antd';
const { RangePicker } = DatePicker;

export default function Home() {
  const [dashboard, setDashboard] = useState({});

  useEffect(() => {
    (async () => {
      const response = await dashboardApi.getAll({
        start_date: '2023-01-01',
        end_date: '2023-01-01',
      });
      setDashboard(response.data);
    })();
  }, []);

  const onChange = (value, dateString) => {
    console.log('Selected Time: ', value);
    console.log('Formatted Selected Time: ', dateString);
    (async () => {
      const response = await dashboardApi.getAll({
        start_date: dateString[0],
        end_date: dateString[1],
      });
      setDashboard(response.data);
    })();
  };

  return (
    <div>
      <HeaderBar title="Tổng quan" icon={faChartSimple} image="" name="Nguyen Long Vu" role="Bac si" />
      <div className="gap-[80px] mt-[10px]">
        <Row gutter={16}>
          <Col span={14} className="mb-5">
            <Card bordered={false}>
              <p className="mb-5 mt-5 text-[20px] font-medium">Tổng quan</p>
              <Row gutter={16}>
                <Col span={12} className="mb-5">
                  <Card bordered={false}>
                    <Statistic title="Bệnh nhân mới" value={dashboard.new_patient} valueStyle={{ color: '#3f8600' }} />
                  </Card>
                </Col>
                <Col span={12}>
                  <Card bordered={false}>
                    <Statistic title="Lượng thuốc" value={dashboard.new_medicine} valueStyle={{ color: '#cf1322' }} />
                  </Card>
                </Col>
              </Row>
              <Row gutter={16}>
                <Col span={12}>
                  <Card bordered={false}>
                    <Statistic title="Doanh thu" value={dashboard.revenue} valueStyle={{ color: '#3f8600' }} />
                  </Card>
                </Col>
                <Col span={12}>
                  <Card bordered={false}>
                    <Statistic title="Lượt khám" value={dashboard.new_ticket} valueStyle={{ color: '#cf1322' }} />
                  </Card>
                </Col>
              </Row>
            </Card>
          </Col>
          <Col span={10} className="mb-5">
            <Card bordered={false} className="h-[100%]">
              <Card bordered={false} className="mb-5">
                <p className="mb-5 text-[20px] flex items-center justify-center font-medium">Chọn ngày</p>
                <Space direction="vertical" size={12} className="flex items-center justify-center">
                  <RangePicker format="YYYY-MM-DD" onChange={onChange} />
                </Space>
              </Card>
              <Card bordered={false} className="mb-0 flex items-center justify-center">
                <p className="text-[20px] font-medium">Tổng số bệnh nhân</p>
                <Statistic
                  className="flex items-center justify-center pt-5 pb-5"
                  value={dashboard.total_patient}
                  valueStyle={{ color: '#9847FF' }}
                  prefix={
                    <svg width="50" height="50" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M21.3399 14.7312C19.9821 14.7312 18.8774 15.8367 18.8774 17.1938V29.3563H5.85786C4.57974 29.3563 3.53442 28.3133 3.53442 27.0352V21.3859C3.53442 17.0008 7.12192 13.4156 11.5071 13.4156H18.3454C19.9579 13.4156 21.461 13.9008 22.7172 14.7312H21.3399ZM14.9266 11.2523C18.025 11.2523 20.554 8.72578 20.554 5.625C20.554 2.52656 18.025 0 14.9266 0C11.8282 0 9.29927 2.52656 9.29927 5.625C9.29927 8.72578 11.8282 11.2523 14.9266 11.2523ZM32.9688 16.6672V19.5172H35.8211L32.9688 16.6672ZM36.4657 20.8086V38.8281C36.4657 39.4727 35.9383 40 35.2938 40H21.3399C20.6954 40 20.168 39.4727 20.168 38.8281V17.1938C20.168 16.5469 20.6954 16.0219 21.3399 16.0219H31.6797V20.1609C31.6797 20.5172 31.968 20.8078 32.3243 20.8078H36.4657V20.8086ZM23.661 20.7156C23.661 21.0719 23.9508 21.3602 24.3055 21.3602H25.6008V22.6555C25.6008 23.0117 25.8907 23.3 26.2454 23.3C26.6016 23.3 26.8922 23.0117 26.8922 22.6555V21.3594H28.1875C28.5422 21.3594 28.8321 21.0711 28.8321 20.7148C28.8321 20.3586 28.5422 20.0703 28.1875 20.0703H26.8922V18.775C26.8922 18.4188 26.6024 18.1305 26.2454 18.1305C25.8907 18.1305 25.6008 18.4188 25.6008 18.775V20.0703H24.3055C23.9508 20.0711 23.661 20.3586 23.661 20.7156ZM33.8125 36.4563C33.8125 36.1 33.5243 35.8094 33.168 35.8094H23.4657C23.1094 35.8094 22.8211 36.0992 22.8211 36.4563C22.8211 36.8125 23.1094 37.1008 23.4657 37.1008H33.168C33.5243 37.1008 33.8125 36.8133 33.8125 36.4563ZM33.8125 33.0352C33.8125 32.6789 33.5243 32.3883 33.168 32.3883H23.4657C23.1094 32.3883 22.8211 32.6781 22.8211 33.0352C22.8211 33.3922 23.1094 33.6797 23.4657 33.6797H33.168C33.5243 33.6797 33.8125 33.3914 33.8125 33.0352ZM33.8125 29.6133C33.8125 29.257 33.5243 28.9664 33.168 28.9664H23.4657C23.1094 28.9664 22.8211 29.2562 22.8211 29.6133C22.8211 29.9695 23.1094 30.2578 23.4657 30.2578H33.168C33.5243 30.2578 33.8125 29.9703 33.8125 29.6133ZM33.8125 26.1922C33.8125 25.8359 33.5243 25.5477 33.168 25.5477H23.4657C23.1094 25.5477 22.8211 25.8359 22.8211 26.1922C22.8211 26.5484 23.1094 26.8367 23.4657 26.8367H33.168C33.5243 26.8367 33.8125 26.5484 33.8125 26.1922Z"
                        fill="#9847FF"
                      />
                    </svg>
                  }
                ></Statistic>
              </Card>
            </Card>
          </Col>
        </Row>

        <Row gutter={16}>
          <Col span={14}>
            <Card bordered={false}>
              <Row gutter={16} className="mb-5">
                <Card bordered={false} className="w-[100%]">
                  <p className="mb-5 text-[20px] flex items-center justify-center font-medium">
                    Biểu đồ số lượng bệnh nhân
                  </p>
                </Card>
              </Row>
              <Row gutter={16}>
                <Card bordered={false} className="w-[100%]">
                  <p className="mb-5 text-[20px] flex items-center justify-center font-medium">Biểu đồ doanh thu</p>
                </Card>
              </Row>
            </Card>
          </Col>
          <Col span={10}>
            <Card>
              <Card bordered={false} className="mb-5 flex items-center justify-center">
                <p className="text-[20px] font-medium">Tổng số lượt khám</p>
                <Statistic
                  className="flex items-center justify-center pt-5 pb-5"
                  value={dashboard.total_ticket}
                  valueStyle={{ color: '#CF1322' }}
                  prefix={
                    <svg width="50" height="50" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M22.1322 32.9728H33.6784V31.3154C33.6784 30.4038 32.745 29.658 31.6041 29.658H27.9016V25.7934H36.3176C37.6554 25.7934 38.75 24.6987 38.75 23.3609V6.6268C38.75 5.28898 37.6554 4.1943 36.3176 4.1943H34.727L34.5784 4.52898C34.65 4.68273 34.715 4.83945 34.7731 4.99883L35.911 5.4368V6.22836H36.3786C36.5641 6.22836 36.7159 6.38023 36.7159 6.5657V21.6959H18.6888C18.73 21.9968 18.7517 22.3038 18.7517 22.6159C18.7517 23.727 18.481 24.8142 17.9554 25.7934L17.9571 29.072C19.6364 30.0199 21.0716 31.3588 22.1322 32.9728ZM23.6576 4.1943L23.8062 4.52883C23.7345 4.68266 23.6695 4.83945 23.6112 4.99891L22.4735 5.4368V6.22844H9.48016C9.29461 6.22844 9.14281 6.38023 9.14281 6.56578V16.534C8.37328 16.8993 7.68398 17.4062 7.10875 18.0213V6.6268C7.10875 5.28891 8.20336 4.1943 9.54125 4.1943H23.6576ZM28.1034 2.47266L28.4522 1.56641H29.9324L30.2812 2.47266C30.7641 2.58758 31.2252 2.77898 31.6479 3.03922L32.5359 2.64477L33.5826 3.69148L33.1882 4.57945C33.4484 5.00211 33.6399 5.46336 33.7548 5.94625L34.6609 6.29508V7.77531L33.7548 8.12406C33.6399 8.60703 33.4485 9.06844 33.1882 9.49109L33.5825 10.3789L32.5358 11.4255L31.6477 11.0311C31.2251 11.2913 30.764 11.4828 30.2811 11.5977L29.9323 12.504H28.452L28.1033 11.598C27.6203 11.483 27.159 11.2916 26.7362 11.0313L25.8484 11.4256L24.8018 10.3789L25.1962 9.49086C24.9359 9.0682 24.7445 8.60703 24.6296 8.12422L23.7234 7.77539V6.29508L24.6294 5.94633C24.7443 5.46336 24.9357 5.00203 25.1961 4.5793L24.8018 3.69148L25.8485 2.64484L26.7366 3.0393C27.1593 2.77906 27.6205 2.58758 28.1034 2.47266ZM29.1923 4.22805C30.7427 4.22805 31.9994 5.48469 31.9994 7.03516C31.9994 8.58563 30.7427 9.84227 29.1923 9.84227C27.6418 9.84227 26.3852 8.58563 26.3852 7.03516C26.3852 5.48469 27.6418 4.22805 29.1923 4.22805ZM1.25 38.4344C1.83172 32.9984 6.43281 28.7647 12.0232 28.7647C17.6134 28.7647 22.2146 32.9984 22.7963 38.4344H1.25ZM12.0233 17.1374C8.99758 17.1374 6.54477 19.5902 6.54477 22.6159C6.54477 25.6416 8.99766 28.0945 12.0233 28.0945C15.0489 28.0945 17.5018 25.6416 17.5018 22.6159C17.5018 19.5903 15.049 17.1374 12.0233 17.1374ZM16.6506 8.94648C17.6383 9.51672 18.1846 10.6597 18.0457 11.7578L22.5134 14.3372C23.3948 13.6678 24.6579 13.5695 25.6455 14.1398C26.6332 14.71 27.1148 15.7179 27.0588 16.7502L24.5911 15.3255L23.3112 16.0645V17.5423L25.7788 18.967C24.9129 19.5318 23.7991 19.6186 22.8116 19.0484C21.824 18.4781 21.2776 17.3352 21.4165 16.2371L16.9488 13.6577C16.0673 14.327 14.8042 14.4253 13.8166 13.8551C12.8291 13.2848 12.3473 12.277 12.4034 11.2447L14.8711 12.6694L16.151 11.9304V10.4524L13.6834 9.02773C14.5492 8.46305 15.663 8.37625 16.6506 8.94648Z"
                        fill="#CF1322"
                      />
                    </svg>
                  }
                ></Statistic>
              </Card>
              <Card bordered={false} className="mb-0 flex items-center justify-center">
                <p className="text-[20px] font-medium">Tổng số doanh thu</p>
                <Statistic
                  className="flex items-center justify-center pt-5 pb-5"
                  value={dashboard.total_revenue}
                  valueStyle={{ color: '#3F8600' }}
                  prefix={
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M33.5098 0C31.2219 0 29.3672 1.85469 29.3672 4.14258V16.5031H36.4805C37.1277 16.5031 37.6523 15.9784 37.6523 15.3313V4.14258C37.6523 1.85469 35.7977 0 33.5098 0Z"
                        fill="#00855f"
                      />
                      <path
                        d="M14.1688 29.4531C14.1688 22.3741 19.9275 16.5435 27.1014 16.563V4.64734C27.1014 2.86477 27.7724 1.23617 28.8746 0H8.20547C4.97578 0 2.34766 2.62813 2.34766 5.85781V38.807C2.34766 39.8613 3.63727 40.3791 4.36641 39.6172L5.86563 38.0516L7.44922 39.6359C7.90625 40.093 8.64844 40.093 9.10625 39.6359L10.607 38.1359L12.1227 39.6391C12.5797 40.0922 13.3164 40.0922 13.7734 39.6391L15.3133 38.1125L16.8539 39.6391C17.3102 40.0922 18.0461 40.0922 18.5031 39.6398L18.8016 39.3445C15.8959 36.9152 14.1688 33.3231 14.1688 29.4531ZM11.8278 9.45312H14.1406V7.14031C14.1406 6.49313 14.6653 5.96844 15.3125 5.96844C15.9597 5.96844 16.4844 6.49313 16.4844 7.14031V9.45312H18.7972C19.4444 9.45312 19.9691 9.97781 19.9691 10.625C19.9691 11.2722 19.4444 11.7969 18.7972 11.7969H16.4844V14.1097C16.4844 14.7569 15.9597 15.2816 15.3125 15.2816C14.6653 15.2816 14.1406 14.7569 14.1406 14.1097V11.7969H11.8278C11.1806 11.7969 10.6559 11.2722 10.6559 10.625C10.6559 9.97781 11.1806 9.45312 11.8278 9.45312ZM8.28117 17.6602H16.1719C16.8191 17.6602 17.3438 18.1848 17.3438 18.832C17.3438 19.4792 16.8191 20.0039 16.1719 20.0039H8.28117C7.63398 20.0039 7.1093 19.4792 7.1093 18.832C7.1093 18.1848 7.63398 17.6602 8.28117 17.6602ZM12.1913 29.3711H8.27336C7.62617 29.3711 7.10148 28.8464 7.10148 28.1992C7.10148 27.552 7.62617 27.0273 8.27336 27.0273H12.1913C12.8385 27.0273 13.3632 27.552 13.3632 28.1992C13.3632 28.8464 12.8385 29.3711 12.1913 29.3711ZM12.9727 24.6914H8.27719C7.63 24.6914 7.10531 24.1667 7.10531 23.5195C7.10531 22.8723 7.63 22.3477 8.27719 22.3477H12.9727C13.6198 22.3477 14.1445 22.8723 14.1445 23.5195C14.1445 24.1667 13.6198 24.6914 12.9727 24.6914Z"
                        fill="#00855f"
                      />
                      <path
                        d="M27.0596 18.9062C21.244 18.9062 16.5127 23.6376 16.5127 29.4531C16.5127 35.2687 21.244 40 27.0596 40C32.8751 40 37.6064 35.2687 37.6064 29.4531C37.6064 23.6376 32.8751 18.9062 27.0596 18.9062ZM28.2351 33.9663V34.0777C28.2351 34.7249 27.7104 35.2496 27.0632 35.2496C26.4161 35.2496 25.8914 34.7249 25.8914 34.0777V34.0579C25.3664 33.9328 24.8794 33.726 24.4932 33.4734C23.9516 33.119 23.7998 32.3927 24.1541 31.8511C24.5085 31.3094 25.2347 31.1577 25.7764 31.512C26.256 31.8258 27.0466 31.9449 27.4352 31.7621C27.687 31.6436 27.8818 31.3907 27.9089 31.1471C27.967 30.6282 27.154 30.3387 26.6686 30.147C25.9341 29.857 25.0199 29.4959 24.4892 28.5377C23.7327 27.1722 24.3953 25.3716 25.8914 24.7559V24.6969C25.8914 24.0497 26.4161 23.525 27.0632 23.525C27.704 23.525 28.2239 24.0395 28.2342 24.6779C28.656 24.8097 29.0446 25.0206 29.3557 25.3076C29.8314 25.7464 29.8614 26.4877 29.4225 26.9635C28.9837 27.4394 28.2423 27.4691 27.7666 27.0304C27.5739 26.8525 26.9797 26.7808 26.7215 26.9541C26.5479 27.0709 26.4799 27.2945 26.5393 27.4019C26.7868 27.8487 28.0829 28.0018 29.0638 28.7662C31.0675 30.3276 30.3704 33.1473 28.2351 33.9663Z"
                        fill="#00855f"
                      />
                    </svg>
                  }
                ></Statistic>
              </Card>
            </Card>
          </Col>
        </Row>
      </div>
    </div>
  );
}
